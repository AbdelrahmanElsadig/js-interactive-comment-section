/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./scripts/btns.js":
/*!*************************!*\
  !*** ./scripts/btns.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"add_modal\": () => (/* binding */ add_modal),\n/* harmony export */   \"delete_feature\": () => (/* binding */ delete_feature),\n/* harmony export */   \"edit_feature\": () => (/* binding */ edit_feature)\n/* harmony export */ });\nfunction add_modal() {\r\n    let container_modal = document.createElement('div');\r\n    container_modal.classList.add('container-modal');\r\n    container_modal.innerHTML = `<div class=\"modal\">\r\n    <h3>Delete comment</h3>\r\n    <p>Are you sure you want to delete this comment? This will remove the comment and can't be undone.</p>\r\n    <div class=\"modal-btns\">\r\n      <input type=\"submit\" name=\"submit\" id='cancel' value=\"NO, CANCEL\">\r\n      <input type=\"submit\" name=\"submit\" id='delete' value=\"YES, DELETE\">\r\n    </div>\r\n  </div>\r\n  <div class=\"overlay\"></div>`;\r\n    const container = document.querySelector('.container');\r\n    container.appendChild(container_modal);\r\n  }\r\n  \r\n  \r\n  function edit_feature(btns = [...document.querySelectorAll('#edit')]) {\r\n    btns.forEach(btn => {\r\n      btn.addEventListener('click', () => {\r\n        const msg_container = btn.closest('.msg-container');\r\n        if (msg_container.querySelector('#edit_area')) return\r\n        const text = msg_container.querySelector('.msg-text');\r\n        const textarea = document.createElement('textarea');\r\n        textarea.setAttribute('name', 'edit');\r\n        textarea.setAttribute('placeholder', 'Add a comment');\r\n        textarea.setAttribute('id', 'edit_area');\r\n        textarea.setAttribute('rows', '4');\r\n        textarea.value = text.textContent;\r\n        text.parentNode.replaceChild(textarea, text);\r\n        let update_btn = document.createElement('div');\r\n        update_btn.classList.add('update');\r\n        update_btn.innerHTML = `<input type=\"submit\" name=\"submit\" id='update' value=\"UPDATE\">`;\r\n        const reply_you = msg_container.querySelector('.reply.you');\r\n        reply_you.appendChild(update_btn);\r\n        update_btn.addEventListener('click', () => {\r\n          text.textContent = textarea.value;\r\n          textarea.parentNode.replaceChild(text, textarea);\r\n          update_btn.remove()\r\n        })\r\n      })\r\n    })\r\n  }\r\n  \r\n  \r\n  function delete_feature(btns = [...document.querySelectorAll('#del')]) {\r\n    const overlay = document.querySelector('.overlay');\r\n    const modal = document.querySelector('.modal');\r\n    btns.forEach(btn => {\r\n      btn.addEventListener('click', () => {\r\n        overlay.classList.add('active')\r\n        modal.classList.add('active');\r\n        let cancel = document.querySelector('#cancel');\r\n        let del = document.querySelector('#delete');\r\n        cancel.addEventListener('click', () => {\r\n          overlay.classList.remove('active')\r\n          modal.classList.remove('active');\r\n        })\r\n  \r\n        del.addEventListener('click', () => {\r\n          overlay.classList.remove('active')\r\n          modal.classList.remove('active');\r\n          btn.closest('.msg-container').remove()\r\n        })\r\n      })\r\n    })\r\n  }\r\n\r\n  \r\n  \n\n//# sourceURL=webpack://interactive-comments-section-main/./scripts/btns.js?");

/***/ }),

/***/ "./scripts/reply.js":
/*!**************************!*\
  !*** ./scripts/reply.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"reply_functionality\": () => (/* binding */ reply_functionality),\n/* harmony export */   \"send_reply\": () => (/* binding */ send_reply),\n/* harmony export */   \"templates\": () => (/* binding */ templates)\n/* harmony export */ });\n/* harmony import */ var _btns__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./btns */ \"./scripts/btns.js\");\n\r\n\r\n\r\nconst templates = (() => {\r\n    function create_reply_form(name, element) {\r\n      const div = document.createElement('div');\r\n      div.classList.add('reply-container');\r\n      div.innerHTML = `<textarea name=\"comment\" placeholder=\"Add a comment\" id=\"reply_comment\" cols=\"100\" rows=\"4\"></textarea>\r\n          <div class=\"send\">\r\n            <img class=\"pfp\" src=\"./images/avatars/image-juliusomo.png\" alt=\"\">\r\n            <input type=\"submit\" name=\"submit\" id='reply' value=\"Reply\">\r\n          </div>`\r\n      element.insertAdjacentElement('afterend', div)\r\n      let textarea = document.querySelector('#reply_comment');\r\n      textarea.textContent = `@${name}, `;\r\n    };\r\n  \r\n  \r\n  \r\n    return {\r\n      reply_form: create_reply_form\r\n    }\r\n  })()\r\n  \r\n  const reply_functionality = ((btns) => {\r\n    btns.forEach(btn => {\r\n      btn.addEventListener('click', () => {\r\n        const msg_container = btn.closest('.msg-container');\r\n        const name = msg_container.querySelector('.usr').textContent;\r\n        const current = document.querySelector('.reply-container');\r\n        if (current) {\r\n          current.remove()\r\n          return\r\n        }\r\n        templates.reply_form(name, msg_container);\r\n        let reply_btn = document.querySelector('#reply');\r\n        reply_btn.addEventListener('click', () => {\r\n          const current = document.querySelector('.reply-container');\r\n          send_reply(msg_container, {\r\n            image: {\r\n              png: \"./images/avatars/image-juliusomo.png\"\r\n            },\r\n            score: 0,\r\n            username: 'juliusomo',\r\n            createdAt: 'A few seconds ago'\r\n          });\r\n          current.remove()\r\n        })\r\n      })\r\n    })\r\n  })\r\n  \r\n  function send_reply(msg_container, reply) {\r\n    let replies;\r\n    let sibling = msg_container.nextElementSibling;\r\n    if (sibling && sibling.classList.contains('replies')) {\r\n      replies = msg_container.nextElementSibling;\r\n    } else if (msg_container.closest('.replies')) {\r\n      replies = msg_container.closest('.replies')\r\n    } else {\r\n      replies = document.createElement('div');\r\n      replies.classList.add('replies');\r\n      msg_container.insertAdjacentElement('afterend', replies)\r\n    }\r\n    let msg = document.createElement('div');\r\n    msg.classList.add('msg-container');\r\n    msg.classList.add('you');\r\n    msg.innerHTML = `\r\n      <div class=\"feedbacks\">\r\n      <div class=\"rate\">\r\n        <button class=\"plus\">&plus;</button>\r\n        <p class=\"rating\">${reply['score']}</p>\r\n        <button class=\"minus\">&minus;</button>\r\n      </div>\r\n    </div>\r\n    <div class=\"msg\">\r\n      <div class=\"msg-header\">\r\n        <img class=\"pfp\" src=\"${reply['image']['png']}\" alt=\"\">\r\n        <h3 class=\"usr\">${reply['username']}</h3>\r\n        <p class=\"you\">you</p>\r\n        <p class=\"time-posted\">${reply[\"createdAt\"]}</p>\r\n      </div>\r\n      <p class=\"msg-text\"></p>\r\n    </div>\r\n  \r\n  \r\n    <div class=\"reply you\">\r\n            <p class=\"del-edit\" id='del'><svg width=\"12\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path\r\n                  d=\"M1.167 12.448c0 .854.7 1.552 1.555 1.552h6.222c.856 0 1.556-.698 1.556-1.552V3.5H1.167v8.948Zm10.5-11.281H8.75L7.773 0h-3.88l-.976 1.167H0v1.166h11.667V1.167Z\"\r\n                  fill=\"#ED6368\" /></svg>Delete</p>\r\n            <p class=\"del-edit\" id='edit'><svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path\r\n                  d=\"M13.479 2.872 11.08.474a1.75 1.75 0 0 0-2.327-.06L.879 8.287a1.75 1.75 0 0 0-.5 1.06l-.375 3.648a.875.875 0 0 0 .875.954h.078l3.65-.333c.399-.04.773-.216 1.058-.499l7.875-7.875a1.68 1.68 0 0 0-.061-2.371Zm-2.975 2.923L8.159 3.449 9.865 1.7l2.389 2.39-1.75 1.706Z\"\r\n                  fill=\"#5357B6\"/></svg>Edit</p>\r\n          </div>`\r\n    let textarea = document.querySelector('#reply_comment')\r\n    let text = msg.querySelector('.msg-text');\r\n    text.textContent = textarea.value;\r\n    textarea.value = null;\r\n    let del = msg.querySelector('#del');\r\n    let edit = msg.querySelector('#edit');\r\n    (0,_btns__WEBPACK_IMPORTED_MODULE_0__.edit_feature)([edit]);\r\n    (0,_btns__WEBPACK_IMPORTED_MODULE_0__.delete_feature)([del]);\r\n    replies.appendChild(msg);\r\n  }\r\n\r\n  \n\n//# sourceURL=webpack://interactive-comments-section-main/./scripts/reply.js?");

/***/ }),

/***/ "./scripts/script.js":
/*!***************************!*\
  !*** ./scripts/script.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _btns_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./btns.js */ \"./scripts/btns.js\");\n/* harmony import */ var _reply_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./reply.js */ \"./scripts/reply.js\");\n\r\n\r\n\r\nfunction create_message_from_json(json, reply = false) {\r\n  let container = document.querySelector('.container');\r\n  json.forEach(msg => {\r\n    let div = document.createElement('div');\r\n    div.classList.add('msg-container');\r\n    div.innerHTML = `<div class=\"feedbacks\">\r\n        <div class=\"rate\">\r\n          <button class=\"plus\">&plus;</button>\r\n          <p class=\"rating\">${msg['score']}</p>\r\n          <button class=\"minus\">&minus;</button>\r\n        </div>\r\n      </div>\r\n      <div class=\"msg\">\r\n        <div class=\"msg-header\">\r\n          <img class=\"pfp\" src=\"${msg['user']['image']['png']}\" alt=\"\">\r\n          <h3 class=\"usr\">${msg['user']['username']}</h3>\r\n          <p class=\"time-posted\">${msg[\"createdAt\"]}</p>\r\n        </div>\r\n        <p class=\"msg-text\"></p>\r\n      </div>\r\n\r\n\r\n      <div class=\"reply\">\r\n        <p class=\"respond\"><svg width=\"14\" height=\"13\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path\r\n              d=\"M.227 4.316 5.04.16a.657.657 0 0 1 1.085.497v2.189c4.392.05 7.875.93 7.875 5.093 0 1.68-1.082 3.344-2.279 4.214-.373.272-.905-.07-.767-.51 1.24-3.964-.588-5.017-4.829-5.078v2.404c0 .566-.664.86-1.085.496L.227 5.31a.657.657 0 0 1 0-.993Z\"\r\n              fill=\"#5357B6\" /></svg>Reply</p>\r\n      </div>`\r\n\r\n    let text = div.querySelector('.msg-text');\r\n    text.textContent = msg['content'];\r\n    container.appendChild(div);\r\n  })\r\n}\r\n\r\n\r\n\r\nfunction create_replies(msg_container, reply) {\r\n  let replies;\r\n  let sibling = msg_container.nextElementSibling;\r\n  if (sibling && sibling.classList.contains('replies')) {\r\n    replies = msg_container.nextElementSibling;\r\n  } else if (msg_container.closest('.replies')) {\r\n    replies = msg_container.closest('.replies')\r\n  } else {\r\n    replies = document.createElement('div');\r\n    replies.classList.add('replies');\r\n    msg_container.insertAdjacentElement('afterend', replies)\r\n  }\r\n  let msg = document.createElement('div');\r\n  msg.classList.add('msg-container')\r\n  msg.innerHTML = `\r\n    <div class=\"feedbacks\">\r\n    <div class=\"rate\">\r\n      <button class=\"plus\">&plus;</button>\r\n      <p class=\"rating\">${reply['score']}</p>\r\n      <button class=\"minus\">&minus;</button>\r\n    </div>\r\n  </div>\r\n  <div class=\"msg\">\r\n    <div class=\"msg-header\">\r\n      <img class=\"pfp\" src=\"${reply['user']['image']['png']}\" alt=\"\">\r\n      <h3 class=\"usr\">${reply['user']['username']}</h3>\r\n      <p class=\"time-posted\">${reply[\"createdAt\"]}</p>\r\n    </div>\r\n    <p class=\"msg-text\"></p>\r\n  </div>\r\n\r\n\r\n  <div class=\"reply\">\r\n    <p class=\"respond\"><svg width=\"14\" height=\"13\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <path\r\n          d=\"M.227 4.316 5.04.16a.657.657 0 0 1 1.085.497v2.189c4.392.05 7.875.93 7.875 5.093 0 1.68-1.082 3.344-2.279 4.214-.373.272-.905-.07-.767-.51 1.24-3.964-.588-5.017-4.829-5.078v2.404c0 .566-.664.86-1.085.496L.227 5.31a.657.657 0 0 1 0-.993Z\"\r\n          fill=\"#5357B6\" /></svg>Reply</p>\r\n  </div>`\r\n  if (reply['user']['username'] === 'juliusomo') {\r\n    const reply_you = document.createElement('div');\r\n    reply_you.classList.add('reply');\r\n    reply_you.classList.add('you');\r\n    reply_you.innerHTML = `\r\n      <p class=\"del-edit\" id='del'><svg width=\"12\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path\r\n            d=\"M1.167 12.448c0 .854.7 1.552 1.555 1.552h6.222c.856 0 1.556-.698 1.556-1.552V3.5H1.167v8.948Zm10.5-11.281H8.75L7.773 0h-3.88l-.976 1.167H0v1.166h11.667V1.167Z\"\r\n            fill=\"#ED6368\" /></svg>Delete</p>\r\n      <p class=\"del-edit\" id='edit'><svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path\r\n            d=\"M13.479 2.872 11.08.474a1.75 1.75 0 0 0-2.327-.06L.879 8.287a1.75 1.75 0 0 0-.5 1.06l-.375 3.648a.875.875 0 0 0 .875.954h.078l3.65-.333c.399-.04.773-.216 1.058-.499l7.875-7.875a1.68 1.68 0 0 0-.061-2.371Zm-2.975 2.923L8.159 3.449 9.865 1.7l2.389 2.39-1.75 1.706Z\"\r\n            fill=\"#5357B6\"/></svg>Edit</p>\r\n      `\r\n    const p = document.createElement('p');\r\n    p.classList.add('you');\r\n    p.textContent = 'you';\r\n    let usr = msg.querySelector('.usr');\r\n    usr.insertAdjacentElement('afterend', p);\r\n    msg.querySelector('.reply').remove()\r\n    msg.querySelector('.msg').insertAdjacentElement('afterend', reply_you)\r\n  }\r\n  let text = msg.querySelector('.msg-text');\r\n  text.textContent = reply['content']\r\n  replies.appendChild(msg);\r\n\r\n}\r\n\r\n\r\n\r\nfunction make_comment(current_user) {\r\n  let btn = document.querySelector('#submit');\r\n\r\n  function create() {\r\n    let container = document.querySelector('.sending-container');\r\n    let msg_container = document.createElement('div');\r\n    msg_container.classList.add('msg-container');\r\n    msg_container.classList.add('you');\r\n    msg_container.innerHTML = `\r\n       <div class=\"feedbacks\">\r\n       <div class=\"rate\">\r\n         <button class=\"plus\">&plus;</button>\r\n         <p class=\"rating\">0</p>\r\n         <button class=\"minus\">&minus;</button>\r\n       </div>\r\n     </div>\r\n     <div class=\"msg\">\r\n       <div class=\"msg-header\">\r\n         <img class=\"pfp\" src=\"${current_user['image']['png']}\" alt=\"\">\r\n         <h3 class=\"usr\">${current_user['username']}</h3>\r\n         <p class=\"you\">you</p>\r\n         <p class=\"time-posted\">A few seconds ago</p>\r\n       </div>\r\n       <p class=\"msg-text\"></p>\r\n     </div>\r\n   \r\n   \r\n     <div class=\"reply you\">\r\n          <p class=\"del-edit\" id='del'><svg width=\"12\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\r\n              <path\r\n                d=\"M1.167 12.448c0 .854.7 1.552 1.555 1.552h6.222c.856 0 1.556-.698 1.556-1.552V3.5H1.167v8.948Zm10.5-11.281H8.75L7.773 0h-3.88l-.976 1.167H0v1.166h11.667V1.167Z\"\r\n                fill=\"#ED6368\" /></svg>Delete</p>\r\n          <p class=\"del-edit\" id='edit'><svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\r\n              <path\r\n                d=\"M13.479 2.872 11.08.474a1.75 1.75 0 0 0-2.327-.06L.879 8.287a1.75 1.75 0 0 0-.5 1.06l-.375 3.648a.875.875 0 0 0 .875.954h.078l3.65-.333c.399-.04.773-.216 1.058-.499l7.875-7.875a1.68 1.68 0 0 0-.061-2.371Zm-2.975 2.923L8.159 3.449 9.865 1.7l2.389 2.39-1.75 1.706Z\"\r\n                fill=\"#5357B6\"/></svg>Edit</p>\r\n        </div>`\r\n    let text = msg_container.querySelector('.msg-text');\r\n    let msg_txt = document.querySelector('#comment');\r\n    text.textContent = msg_txt.value\r\n    msg_txt.value = null;\r\n    let del = msg_container.querySelector('#del');\r\n    let edit = msg_container.querySelector('#edit');\r\n    (0,_btns_js__WEBPACK_IMPORTED_MODULE_0__.edit_feature)([edit]);\r\n    (0,_btns_js__WEBPACK_IMPORTED_MODULE_0__.delete_feature)([del]);\r\n    container.insertAdjacentElement(\"beforebegin\", msg_container);\r\n\r\n  }\r\n  btn.addEventListener('click', () => {\r\n    create()\r\n  })\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nfetch('https://abdelrahmanelsadig.github.io/js-interactive-comment-section/data.json')\r\n  .then(res => res.json())\r\n  .then(json => {\r\n    create_message_from_json(json.comments);\r\n    json.comments.forEach(comment => {\r\n      if (comment.replies.length > 0) {\r\n        comment.replies.forEach(reply => {\r\n          let msg_container = document.querySelector('.msg-container:last-child');\r\n          create_replies(msg_container, reply)\r\n        })\r\n      }\r\n    })\r\n    return json\r\n  })\r\n  .then(json => {\r\n    let container = document.querySelector('.container');\r\n    let sending_container = document.createElement('div');\r\n    sending_container.classList.add('sending-container');\r\n    sending_container.innerHTML = `\r\n        <textarea name=\"comment\" placeholder=\"Add a comment\" id=\"comment\" cols=\"100\" rows=\"4\"></textarea>\r\n        <div class=\"send\">\r\n            <img class=\"pfp\" src=\"./images/avatars/image-juliusomo.png\" alt=\"\">\r\n            <input type=\"submit\" name=\"submit\" id='submit' value=\"SEND\">\r\n        </div>`\r\n    container.appendChild(sending_container);\r\n    (0,_reply_js__WEBPACK_IMPORTED_MODULE_1__.reply_functionality)([...document.querySelectorAll('.respond')]);\r\n    make_comment(json.currentUser);\r\n    (0,_btns_js__WEBPACK_IMPORTED_MODULE_0__.edit_feature)();\r\n    (0,_btns_js__WEBPACK_IMPORTED_MODULE_0__.add_modal)()\r\n    ;(0,_btns_js__WEBPACK_IMPORTED_MODULE_0__.delete_feature)([...document.querySelectorAll('#del')]);\r\n  })\n\n//# sourceURL=webpack://interactive-comments-section-main/./scripts/script.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./scripts/script.js");
/******/ 	
/******/ })()
;